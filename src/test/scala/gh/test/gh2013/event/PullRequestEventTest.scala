package gh.test.gh2013.payload

import gh2013.events.PullRequestEventParser
import net.liftweb.json._
import org.scalatest.{Matchers, FlatSpec}

class PullRequestEventTest extends FlatSpec with Matchers
{
   "A valid PullRequestEvent" must "be correctly parsed" in {
      val json = parse(
         """
           |{
           |
           |    "created_at":"2013-01-01T00:05:25-08:00",
           |    "url":"https://github.com/libgit2/rugged/pull/152",
           |    "actor_attributes":{
           |        "location":"California",
           |        "blog":"http://twitter.com/tnm",
           |        "type":"User",
           |        "gravatar_id":"803993dc11765d89aee137f29aa05d3a",
           |        "email":"ted@ted.io",
           |        "login":"tnm",
           |        "company":"GitHub",
           |        "name":"Ted Nyman"
           |    },
           |    "payload":{
           |        "number":152,
           |        "action":"closed",
           |        "pull_request":{
           |            "milestone":null,
           |            "comments":0,
           |            "comments_url":"https://api.github.com/repos/libgit2/rugged/issues/152/comments",
           |            "review_comments":0,
           |            "review_comments_url":"https://github.com/libgit2/rugged/pull/152/comments",
           |            "deletions":17,
           |            "number":152,
           |            "created_at":"2012-12-31T23:21:30Z",
           |            "merge_commit_sha":"0c5d05cd6ff6fa57585f4d09c2997393f926fc35",
           |            "closed_at":"2013-01-01T08:05:25Z",
           |            "url":"https://api.github.com/repos/libgit2/rugged/pulls/152",
           |            "merged_at":"2013-01-01T08:05:25Z",
           |            "_links":{
           |                "comments":{
           |                    "href":"https://api.github.com/repos/libgit2/rugged/issues/152/comments"
           |                },
           |                "review_comments":{
           |                    "href":"https://api.github.com/repos/libgit2/rugged/pulls/152/comments"
           |                },
           |                "self":{
           |                    "href":"https://api.github.com/repos/libgit2/rugged/pulls/152"
           |                },
           |                "issue":{
           |                    "href":"https://api.github.com/repos/libgit2/rugged/issues/152"
           |                },
           |                "html":{
           |                    "href":"https://github.com/libgit2/rugged/pull/152"
           |                }
           |            },
           |            "additions":17,
           |            "id":3515028,
           |            "mergeable":null,
           |            "state":"closed",
           |            "mergeable_state":"unknown",
           |            "body":"**Bonne Ann√©e, Bon Any Nou, Buon Anno**",
           |            "changed_files":17,
           |            "patch_url":"https://github.com/libgit2/rugged/pull/152.patch",
           |            "merged":true,
           |            "commits_url":"https://github.com/libgit2/rugged/pull/152/commits",
           |            "html_url":"https://github.com/libgit2/rugged/pull/152",
           |            "user":{
           |                "events_url":"https://api.github.com/users/tnm/events{/privacy}",
           |                "repos_url":"https://api.github.com/users/tnm/repos",
           |                "url":"https://api.github.com/users/tnm",
           |                "organizations_url":"https://api.github.com/users/tnm/orgs",
           |                "id":126905,
           |                "avatar_url":"https://secure.gravatar.com/avatar/803993dc11765d89aee137f29aa05d3a?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
           |                "gravatar_id":"803993dc11765d89aee137f29aa05d3a",
           |                "type":"User",
           |                "received_events_url":"https://api.github.com/users/tnm/received_events",
           |                "subscriptions_url":"https://api.github.com/users/tnm/subscriptions",
           |                "starred_url":"https://api.github.com/users/tnm/starred{/owner}{/repo}",
           |                "login":"tnm",
           |                "followers_url":"https://api.github.com/users/tnm/followers",
           |                "following_url":"https://api.github.com/users/tnm/following",
           |                "gists_url":"https://api.github.com/users/tnm/gists{/gist_id}"
           |            },
           |            "diff_url":"https://github.com/libgit2/rugged/pull/152.diff",
           |            "review_comment_url":"/repos/libgit2/rugged/pulls/comments/{number}",
           |            "updated_at":"2013-01-01T08:05:25Z",
           |            "head":{
           |                "repo":{
           |                    "events_url":"https://api.github.com/repos/tnm/rugged/events",
           |                    "comments_url":"https://api.github.com/repos/tnm/rugged/comments{/number}",
           |                    "full_name":"tnm/rugged",
           |                    "open_issues_count":0,
           |                    "hooks_url":"https://api.github.com/repos/tnm/rugged/hooks",
           |                    "git_commits_url":"https://api.github.com/repos/tnm/rugged/git/commits{/sha}",
           |                    "created_at":"2012-12-17T22:00:58Z",
           |                    "git_refs_url":"https://api.github.com/repos/tnm/rugged/git/refs{/sha}",
           |                    "git_url":"git://github.com/tnm/rugged.git",
           |                    "size":248,
           |                    "pushed_at":"2012-12-31T23:19:30Z",
           |                    "url":"https://api.github.com/repos/tnm/rugged",
           |                    "open_issues":0,
           |                    "merges_url":"https://api.github.com/repos/tnm/rugged/merges",
           |                    "statuses_url":"https://api.github.com/repos/tnm/rugged/statuses/{sha}",
           |                    "id":7213068,
           |                    "git_tags_url":"https://api.github.com/repos/tnm/rugged/git/tags{/sha}",
           |                    "contributors_url":"https://api.github.com/repos/tnm/rugged/contributors",
           |                    "has_downloads":true,
           |                    "stargazers_url":"https://api.github.com/repos/tnm/rugged/stargazers",
           |                    "subscription_url":"https://api.github.com/repos/tnm/rugged/subscription",
           |                    "has_issues":false,
           |                    "compare_url":"https://api.github.com/repos/tnm/rugged/compare/{base}...{head}",
           |                    "forks_count":0,
           |                    "clone_url":"https://github.com/tnm/rugged.git",
           |                    "contents_url":"https://api.github.com/repos/tnm/rugged/contents/{+path}",
           |                    "master_branch":"development",
           |                    "mirror_url":null,
           |                    "fork":true,
           |                    "blobs_url":"https://api.github.com/repos/tnm/rugged/git/blobs{/sha}",
           |                    "branches_url":"https://api.github.com/repos/tnm/rugged/branches{/branch}",
           |                    "trees_url":"https://api.github.com/repos/tnm/rugged/git/trees{/sha}",
           |                    "private":false,
           |                    "watchers":1,
           |                    "teams_url":"https://api.github.com/repos/tnm/rugged/teams",
           |                    "downloads_url":"https://api.github.com/repos/tnm/rugged/downloads",
           |                    "default_branch":"development",
           |                    "forks_url":"https://api.github.com/repos/tnm/rugged/forks",
           |                    "assignees_url":"https://api.github.com/repos/tnm/rugged/assignees{/user}",
           |                    "svn_url":"https://github.com/tnm/rugged",
           |                    "archive_url":"https://api.github.com/repos/tnm/rugged/{archive_format}{/ref}",
           |                    "subscribers_url":"https://api.github.com/repos/tnm/rugged/subscribers",
           |                    "commits_url":"https://api.github.com/repos/tnm/rugged/commits{/sha}",
           |                    "issues_url":"https://api.github.com/repos/tnm/rugged/issues{/number}",
           |                    "html_url":"https://github.com/tnm/rugged",
           |                    "tags_url":"https://api.github.com/repos/tnm/rugged/tags{/tag}",
           |                    "updated_at":"2012-12-31T23:19:33Z",
           |                    "milestones_url":"https://api.github.com/repos/tnm/rugged/milestones{/number}",
           |                    "watchers_count":1,
           |                    "languages_url":"https://api.github.com/repos/tnm/rugged/languages",
           |                    "notifications_url":"https://api.github.com/repos/tnm/rugged/notifications{?since,all,participating}",
           |                    "ssh_url":"git@github.com:tnm/rugged.git",
           |                    "name":"rugged",
           |                    "description":"ruby bindings to libgit2",
           |                    "labels_url":"https://api.github.com/repos/tnm/rugged/labels{/name}",
           |                    "language":"C",
           |                    "collaborators_url":"https://api.github.com/repos/tnm/rugged/collaborators{/collaborator}",
           |                    "homepage":"",
           |                    "keys_url":"https://api.github.com/repos/tnm/rugged/keys{/key_id}",
           |                    "issue_events_url":"https://api.github.com/repos/tnm/rugged/issues/events{/number}",
           |                    "forks":0,
           |                    "pulls_url":"https://api.github.com/repos/tnm/rugged/pulls{/number}",
           |                    "issue_comment_url":"https://api.github.com/repos/tnm/rugged/issues/comments/{number}",
           |                    "owner":{
           |                        "events_url":"https://api.github.com/users/tnm/events{/privacy}",
           |                        "repos_url":"https://api.github.com/users/tnm/repos",
           |                        "url":"https://api.github.com/users/tnm",
           |                        "organizations_url":"https://api.github.com/users/tnm/orgs",
           |                        "id":126905,
           |                        "avatar_url":"https://secure.gravatar.com/avatar/803993dc11765d89aee137f29aa05d3a?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
           |                        "gravatar_id":"803993dc11765d89aee137f29aa05d3a",
           |                        "type":"User",
           |                        "received_events_url":"https://api.github.com/users/tnm/received_events",
           |                        "subscriptions_url":"https://api.github.com/users/tnm/subscriptions",
           |                        "starred_url":"https://api.github.com/users/tnm/starred{/owner}{/repo}",
           |                        "login":"tnm",
           |                        "followers_url":"https://api.github.com/users/tnm/followers",
           |                        "following_url":"https://api.github.com/users/tnm/following",
           |                        "gists_url":"https://api.github.com/users/tnm/gists{/gist_id}"
           |                    },
           |                    "has_wiki":false
           |                },
           |                "label":"tnm:update-date",
           |                "sha":"07a901581e43231a205aa868e4c7aea22161e99b",
           |                "user":{
           |                    "events_url":"https://api.github.com/users/tnm/events{/privacy}",
           |                    "repos_url":"https://api.github.com/users/tnm/repos",
           |                    "url":"https://api.github.com/users/tnm",
           |                    "organizations_url":"https://api.github.com/users/tnm/orgs",
           |                    "id":126905,
           |                    "avatar_url":"https://secure.gravatar.com/avatar/803993dc11765d89aee137f29aa05d3a?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
           |                    "gravatar_id":"803993dc11765d89aee137f29aa05d3a",
           |                    "type":"User",
           |                    "received_events_url":"https://api.github.com/users/tnm/received_events",
           |                    "subscriptions_url":"https://api.github.com/users/tnm/subscriptions",
           |                    "starred_url":"https://api.github.com/users/tnm/starred{/owner}{/repo}",
           |                    "login":"tnm",
           |                    "followers_url":"https://api.github.com/users/tnm/followers",
           |                    "following_url":"https://api.github.com/users/tnm/following",
           |                    "gists_url":"https://api.github.com/users/tnm/gists{/gist_id}"
           |                },
           |                "ref":"update-date"
           |            },
           |            "merged_by":{
           |                "events_url":"https://api.github.com/users/tnm/events{/privacy}",
           |                "repos_url":"https://api.github.com/users/tnm/repos",
           |                "url":"https://api.github.com/users/tnm",
           |                "organizations_url":"https://api.github.com/users/tnm/orgs",
           |                "id":126905,
           |                "avatar_url":"https://secure.gravatar.com/avatar/803993dc11765d89aee137f29aa05d3a?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
           |                "gravatar_id":"803993dc11765d89aee137f29aa05d3a",
           |                "type":"User",
           |                "received_events_url":"https://api.github.com/users/tnm/received_events",
           |                "subscriptions_url":"https://api.github.com/users/tnm/subscriptions",
           |                "starred_url":"https://api.github.com/users/tnm/starred{/owner}{/repo}",
           |                "login":"tnm",
           |                "followers_url":"https://api.github.com/users/tnm/followers",
           |                "following_url":"https://api.github.com/users/tnm/following",
           |                "gists_url":"https://api.github.com/users/tnm/gists{/gist_id}"
           |            },
           |            "issue_url":"https://github.com/libgit2/rugged/issues/152",
           |            "base":{
           |                "repo":{
           |                    "events_url":"https://api.github.com/repos/libgit2/rugged/events",
           |                    "comments_url":"https://api.github.com/repos/libgit2/rugged/comments{/number}",
           |                    "full_name":"libgit2/rugged",
           |                    "open_issues_count":18,
           |                    "hooks_url":"https://api.github.com/repos/libgit2/rugged/hooks",
           |                    "git_commits_url":"https://api.github.com/repos/libgit2/rugged/git/commits{/sha}",
           |                    "created_at":"2010-09-10T16:18:17Z",
           |                    "git_refs_url":"https://api.github.com/repos/libgit2/rugged/git/refs{/sha}",
           |                    "git_url":"git://github.com/libgit2/rugged.git",
           |                    "size":356,
           |                    "pushed_at":"2013-01-01T08:05:24Z",
           |                    "url":"https://api.github.com/repos/libgit2/rugged",
           |                    "open_issues":18,
           |                    "merges_url":"https://api.github.com/repos/libgit2/rugged/merges",
           |                    "statuses_url":"https://api.github.com/repos/libgit2/rugged/statuses/{sha}",
           |                    "id":901663,
           |                    "git_tags_url":"https://api.github.com/repos/libgit2/rugged/git/tags{/sha}",
           |                    "contributors_url":"https://api.github.com/repos/libgit2/rugged/contributors",
           |                    "has_downloads":true,
           |                    "stargazers_url":"https://api.github.com/repos/libgit2/rugged/stargazers",
           |                    "subscription_url":"https://api.github.com/repos/libgit2/rugged/subscription",
           |                    "has_issues":true,
           |                    "compare_url":"https://api.github.com/repos/libgit2/rugged/compare/{base}...{head}",
           |                    "forks_count":59,
           |                    "clone_url":"https://github.com/libgit2/rugged.git",
           |                    "contents_url":"https://api.github.com/repos/libgit2/rugged/contents/{+path}",
           |                    "master_branch":"development",
           |                    "mirror_url":null,
           |                    "fork":false,
           |                    "blobs_url":"https://api.github.com/repos/libgit2/rugged/git/blobs{/sha}",
           |                    "branches_url":"https://api.github.com/repos/libgit2/rugged/branches{/branch}",
           |                    "trees_url":"https://api.github.com/repos/libgit2/rugged/git/trees{/sha}",
           |                    "private":false,
           |                    "watchers":488,
           |                    "teams_url":"https://api.github.com/repos/libgit2/rugged/teams",
           |                    "downloads_url":"https://api.github.com/repos/libgit2/rugged/downloads",
           |                    "default_branch":"development",
           |                    "forks_url":"https://api.github.com/repos/libgit2/rugged/forks",
           |                    "assignees_url":"https://api.github.com/repos/libgit2/rugged/assignees{/user}",
           |                    "svn_url":"https://github.com/libgit2/rugged",
           |                    "archive_url":"https://api.github.com/repos/libgit2/rugged/{archive_format}{/ref}",
           |                    "subscribers_url":"https://api.github.com/repos/libgit2/rugged/subscribers",
           |                    "commits_url":"https://api.github.com/repos/libgit2/rugged/commits{/sha}",
           |                    "issues_url":"https://api.github.com/repos/libgit2/rugged/issues{/number}",
           |                    "html_url":"https://github.com/libgit2/rugged",
           |                    "tags_url":"https://api.github.com/repos/libgit2/rugged/tags{/tag}",
           |                    "updated_at":"2013-01-01T08:05:24Z",
           |                    "milestones_url":"https://api.github.com/repos/libgit2/rugged/milestones{/number}",
           |                    "watchers_count":488,
           |                    "languages_url":"https://api.github.com/repos/libgit2/rugged/languages",
           |                    "notifications_url":"https://api.github.com/repos/libgit2/rugged/notifications{?since,all,participating}",
           |                    "ssh_url":"git@github.com:libgit2/rugged.git",
           |                    "name":"rugged",
           |                    "description":"ruby bindings to libgit2",
           |                    "labels_url":"https://api.github.com/repos/libgit2/rugged/labels{/name}",
           |                    "language":"C",
           |                    "collaborators_url":"https://api.github.com/repos/libgit2/rugged/collaborators{/collaborator}",
           |                    "homepage":"",
           |                    "keys_url":"https://api.github.com/repos/libgit2/rugged/keys{/key_id}",
           |                    "issue_events_url":"https://api.github.com/repos/libgit2/rugged/issues/events{/number}",
           |                    "forks":59,
           |                    "pulls_url":"https://api.github.com/repos/libgit2/rugged/pulls{/number}",
           |                    "issue_comment_url":"https://api.github.com/repos/libgit2/rugged/issues/comments/{number}",
           |                    "owner":{
           |                        "events_url":"https://api.github.com/users/libgit2/events{/privacy}",
           |                        "repos_url":"https://api.github.com/users/libgit2/repos",
           |                        "url":"https://api.github.com/users/libgit2",
           |                        "organizations_url":"https://api.github.com/users/libgit2/orgs",
           |                        "id":394745,
           |                        "avatar_url":"https://secure.gravatar.com/avatar/1c56acccc41c591705dc92da5f6ab603?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-org-420.png",
           |                        "gravatar_id":"1c56acccc41c591705dc92da5f6ab603",
           |                        "type":"Organization",
           |                        "received_events_url":"https://api.github.com/users/libgit2/received_events",
           |                        "subscriptions_url":"https://api.github.com/users/libgit2/subscriptions",
           |                        "starred_url":"https://api.github.com/users/libgit2/starred{/owner}{/repo}",
           |                        "login":"libgit2",
           |                        "followers_url":"https://api.github.com/users/libgit2/followers",
           |                        "following_url":"https://api.github.com/users/libgit2/following",
           |                        "gists_url":"https://api.github.com/users/libgit2/gists{/gist_id}"
           |                    },
           |                    "has_wiki":false
           |                },
           |                "label":"libgit2:development",
           |                "sha":"47678c7ebfa9c9098131bcd3efd91b293617eeab",
           |                "user":{
           |                    "events_url":"https://api.github.com/users/libgit2/events{/privacy}",
           |                    "repos_url":"https://api.github.com/users/libgit2/repos",
           |                    "url":"https://api.github.com/users/libgit2",
           |                    "organizations_url":"https://api.github.com/users/libgit2/orgs",
           |                    "id":394745,
           |                    "avatar_url":"https://secure.gravatar.com/avatar/1c56acccc41c591705dc92da5f6ab603?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-org-420.png",
           |                    "gravatar_id":"1c56acccc41c591705dc92da5f6ab603",
           |                    "type":"Organization",
           |                    "received_events_url":"https://api.github.com/users/libgit2/received_events",
           |                    "subscriptions_url":"https://api.github.com/users/libgit2/subscriptions",
           |                    "starred_url":"https://api.github.com/users/libgit2/starred{/owner}{/repo}",
           |                    "login":"libgit2",
           |                    "followers_url":"https://api.github.com/users/libgit2/followers",
           |                    "following_url":"https://api.github.com/users/libgit2/following",
           |                    "gists_url":"https://api.github.com/users/libgit2/gists{/gist_id}"
           |                },
           |                "ref":"development"
           |            },
           |            "title":"Bring us into 2013",
           |            "commits":1,
           |            "assignee":null
           |        }
           |    },
           |    "type":"PullRequestEvent",
           |    "repository":{
           |        "watchers":488,
           |        "owner":"libgit2",
           |        "created_at":"2010-09-10T09:18:17-07:00",
           |        "homepage":"",
           |        "stargazers":488,
           |        "open_issues":18,
           |        "has_downloads":true,
           |        "pushed_at":"2013-01-01T00:05:25-08:00",
           |        "url":"https://github.com/libgit2/rugged",
           |        "description":"ruby bindings to libgit2",
           |        "forks":59,
           |        "organization":"libgit2",
           |        "fork":false,
           |        "size":356,
           |        "name":"rugged",
           |        "has_issues":true,
           |        "has_wiki":false,
           |        "language":"C",
           |        "master_branch":"development",
           |        "id":901663,
           |        "private":false
           |    },
           |    "actor":"tnm",
           |    "public":true
           |
           |}
         """.stripMargin)

      gh2013.parser(PullRequestEventParser)(json) shouldBe 'defined
   }

   "An other valid PullRequestEvent" must "be correctly parsed" in {
      val json = parse(
         """
           | {
           |
           |    "actor_attributes":{
           |        "gravatar_id":"808bec1c640143bd7091888d9edfb2f2",
           |        "name":"Benjamin Roth",
           |        "blog":"peachyweb.com",
           |        "company":"PeachyWeb",
           |        "login":"apneadiving",
           |        "email":"benjamin@rubyist.fr",
           |        "type":"User"
           |    },
           |    "payload":{
           |        "action":"closed",
           |        "pull_request":{
           |            "milestone":null,
           |            "user":{
           |                "followers_url":"https://api.github.com/users/stream7/followers",
           |                "gravatar_id":"ad7ef5c54efa59f36d4a7a1c2d95d269",
           |                "id":301259,
           |                "subscriptions_url":"https://api.github.com/users/stream7/subscriptions",
           |                "received_events_url":"https://api.github.com/users/stream7/received_events",
           |                "following_url":"https://api.github.com/users/stream7/following",
           |                "url":"https://api.github.com/users/stream7",
           |                "starred_url":"https://api.github.com/users/stream7/starred{/owner}{/repo}",
           |                "avatar_url":"https://secure.gravatar.com/avatar/ad7ef5c54efa59f36d4a7a1c2d95d269?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
           |                "login":"stream7",
           |                "events_url":"https://api.github.com/users/stream7/events{/privacy}",
           |                "organizations_url":"https://api.github.com/users/stream7/orgs",
           |                "gists_url":"https://api.github.com/users/stream7/gists{/gist_id}",
           |                "repos_url":"https://api.github.com/users/stream7/repos",
           |                "type":"User"
           |            },
           |            "merged":true,
           |            "changed_files":1,
           |            "review_comment_url":"/repos/apneadiving/Google-Maps-for-Rails/pulls/comments/{number}",
           |            "updated_at":"2013-01-01T18:25:02Z",
           |            "assignee":null,
           |            "id":3413996,
           |            "closed_at":"2013-01-01T18:25:02Z",
           |            "merged_at":"2013-01-01T18:25:02Z",
           |            "html_url":"https://github.com/apneadiving/Google-Maps-for-Rails/pull/303",
           |            "body":"",
           |            "review_comments":0,
           |            "additions":12,
           |            "deletions":1,
           |            "url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/pulls/303",
           |            "patch_url":"https://github.com/apneadiving/Google-Maps-for-Rails/pull/303.patch",
           |            "comments_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/issues/303/comments",
           |            "commits_url":"https://github.com/apneadiving/Google-Maps-for-Rails/pull/303/commits",
           |            "created_at":"2012-12-18T17:15:11Z",
           |            "merge_commit_sha":"111196d1ec3fa4331456491f92d143e847e91d70",
           |            "_links":{
           |                "review_comments":{
           |                    "href":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/pulls/303/comments"
           |                },
           |                "html":{
           |                    "href":"https://github.com/apneadiving/Google-Maps-for-Rails/pull/303"
           |                },
           |                "self":{
           |                    "href":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/pulls/303"
           |                },
           |                "issue":{
           |                    "href":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/issues/303"
           |                },
           |                "comments":{
           |                    "href":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/issues/303/comments"
           |                }
           |            },
           |            "number":303,
           |            "diff_url":"https://github.com/apneadiving/Google-Maps-for-Rails/pull/303.diff",
           |            "review_comments_url":"https://github.com/apneadiving/Google-Maps-for-Rails/pull/303/comments",
           |            "base":{
           |                "user":{
           |                    "followers_url":"https://api.github.com/users/apneadiving/followers",
           |                    "gravatar_id":"808bec1c640143bd7091888d9edfb2f2",
           |                    "id":247583,
           |                    "subscriptions_url":"https://api.github.com/users/apneadiving/subscriptions",
           |                    "received_events_url":"https://api.github.com/users/apneadiving/received_events",
           |                    "following_url":"https://api.github.com/users/apneadiving/following",
           |                    "url":"https://api.github.com/users/apneadiving",
           |                    "starred_url":"https://api.github.com/users/apneadiving/starred{/owner}{/repo}",
           |                    "avatar_url":"https://secure.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
           |                    "login":"apneadiving",
           |                    "events_url":"https://api.github.com/users/apneadiving/events{/privacy}",
           |                    "organizations_url":"https://api.github.com/users/apneadiving/orgs",
           |                    "gists_url":"https://api.github.com/users/apneadiving/gists{/gist_id}",
           |                    "repos_url":"https://api.github.com/users/apneadiving/repos",
           |                    "type":"User"
           |                },
           |                "repo":{
           |                    "fork":false,
           |                    "contributors_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/contributors",
           |                    "archive_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/{archive_format}{/ref}",
           |                    "watchers_count":1095,
           |                    "clone_url":"https://github.com/apneadiving/Google-Maps-for-Rails.git",
           |                    "issue_events_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/issues/events{/number}",
           |                    "contents_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/contents/{+path}",
           |                    "teams_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/teams",
           |                    "downloads_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/downloads",
           |                    "collaborators_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/collaborators{/collaborator}",
           |                    "updated_at":"2013-01-01T18:25:02Z",
           |                    "milestones_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/milestones{/number}",
           |                    "git_url":"git://github.com/apneadiving/Google-Maps-for-Rails.git",
           |                    "git_commits_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/git/commits{/sha}",
           |                    "forks":163,
           |                    "subscription_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/subscription",
           |                    "language":"JavaScript",
           |                    "tags_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/tags{/tag}",
           |                    "branches_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/branches{/branch}",
           |                    "issue_comment_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/issues/comments/{number}",
           |                    "mirror_url":null,
           |                    "assignees_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/assignees{/user}",
           |                    "issues_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/issues{/number}",
           |                    "notifications_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/notifications{?since,all,participating}",
           |                    "id":1367656,
           |                    "open_issues_count":31,
           |                    "labels_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/labels{/name}",
           |                    "keys_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/keys{/key_id}",
           |                    "forks_count":163,
           |                    "private":false,
           |                    "html_url":"https://github.com/apneadiving/Google-Maps-for-Rails",
           |                    "open_issues":31,
           |                    "subscribers_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/subscribers",
           |                    "homepage":"https://rubygems.org/gems/gmaps4rails",
           |                    "compare_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/compare/{base}...{head}",
           |                    "trees_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/git/trees{/sha}",
           |                    "name":"Google-Maps-for-Rails",
           |                    "url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails",
           |                    "merges_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/merges",
           |                    "has_downloads":true,
           |                    "git_tags_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/git/tags{/sha}",
           |                    "comments_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/comments{/number}",
           |                    "svn_url":"https://github.com/apneadiving/Google-Maps-for-Rails",
           |                    "commits_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/commits{/sha}",
           |                    "created_at":"2011-02-15T01:05:14Z",
           |                    "statuses_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/statuses/{sha}",
           |                    "owner":{
           |                        "followers_url":"https://api.github.com/users/apneadiving/followers",
           |                        "gravatar_id":"808bec1c640143bd7091888d9edfb2f2",
           |                        "id":247583,
           |                        "subscriptions_url":"https://api.github.com/users/apneadiving/subscriptions",
           |                        "received_events_url":"https://api.github.com/users/apneadiving/received_events",
           |                        "following_url":"https://api.github.com/users/apneadiving/following",
           |                        "url":"https://api.github.com/users/apneadiving",
           |                        "starred_url":"https://api.github.com/users/apneadiving/starred{/owner}{/repo}",
           |                        "avatar_url":"https://secure.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
           |                        "login":"apneadiving",
           |                        "events_url":"https://api.github.com/users/apneadiving/events{/privacy}",
           |                        "organizations_url":"https://api.github.com/users/apneadiving/orgs",
           |                        "gists_url":"https://api.github.com/users/apneadiving/gists{/gist_id}",
           |                        "repos_url":"https://api.github.com/users/apneadiving/repos",
           |                        "type":"User"
           |                    },
           |                    "size":200,
           |                    "full_name":"apneadiving/Google-Maps-for-Rails",
           |                    "has_wiki":true,
           |                    "ssh_url":"git@github.com:apneadiving/Google-Maps-for-Rails.git",
           |                    "git_refs_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/git/refs{/sha}",
           |                    "hooks_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/hooks",
           |                    "events_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/events",
           |                    "description":"Enables easy display of items (taken from a Rails 3 model) with Google Map, OpenLayers, Bing or Mapquest. Geocoding + Directions included. Provides much options: markers customization, infowindows, auto-adjusted zoom, polylines, polygons, circles etc... See wiki for full description and examples.",
           |                    "pushed_at":"2013-01-01T18:25:02Z",
           |                    "stargazers_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/stargazers",
           |                    "forks_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/forks",
           |                    "has_issues":true,
           |                    "languages_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/languages",
           |                    "watchers":1095,
           |                    "pulls_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/pulls{/number}",
           |                    "blobs_url":"https://api.github.com/repos/apneadiving/Google-Maps-for-Rails/git/blobs{/sha}"
           |                },
           |                "label":"apneadiving:master",
           |                "sha":"b76ec946fe205e19191cc716abf55a7d77ae4116",
           |                "ref":"master"
           |            },
           |            "mergeable":null,
           |            "head":{
           |                "user":{
           |                    "followers_url":"https://api.github.com/users/stream7/followers",
           |                    "gravatar_id":"ad7ef5c54efa59f36d4a7a1c2d95d269",
           |                    "id":301259,
           |                    "subscriptions_url":"https://api.github.com/users/stream7/subscriptions",
           |                    "received_events_url":"https://api.github.com/users/stream7/received_events",
           |                    "following_url":"https://api.github.com/users/stream7/following",
           |                    "url":"https://api.github.com/users/stream7",
           |                    "starred_url":"https://api.github.com/users/stream7/starred{/owner}{/repo}",
           |                    "avatar_url":"https://secure.gravatar.com/avatar/ad7ef5c54efa59f36d4a7a1c2d95d269?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
           |                    "login":"stream7",
           |                    "events_url":"https://api.github.com/users/stream7/events{/privacy}",
           |                    "organizations_url":"https://api.github.com/users/stream7/orgs",
           |                    "gists_url":"https://api.github.com/users/stream7/gists{/gist_id}",
           |                    "repos_url":"https://api.github.com/users/stream7/repos",
           |                    "type":"User"
           |                },
           |                "repo":{
           |                    "fork":true,
           |                    "contributors_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/contributors",
           |                    "archive_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/{archive_format}{/ref}",
           |                    "watchers_count":0,
           |                    "clone_url":"https://github.com/stream7/Google-Maps-for-Rails.git",
           |                    "issue_events_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/issues/events{/number}",
           |                    "contents_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/contents/{+path}",
           |                    "teams_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/teams",
           |                    "downloads_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/downloads",
           |                    "collaborators_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/collaborators{/collaborator}",
           |                    "updated_at":"2012-12-18T12:35:10Z",
           |                    "milestones_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/milestones{/number}",
           |                    "git_url":"git://github.com/stream7/Google-Maps-for-Rails.git",
           |                    "git_commits_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/git/commits{/sha}",
           |                    "forks":0,
           |                    "subscription_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/subscription",
           |                    "language":"JavaScript",
           |                    "tags_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/tags{/tag}",
           |                    "branches_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/branches{/branch}",
           |                    "issue_comment_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/issues/comments/{number}",
           |                    "mirror_url":null,
           |                    "assignees_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/assignees{/user}",
           |                    "issues_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/issues{/number}",
           |                    "notifications_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/notifications{?since,all,participating}",
           |                    "id":7222759,
           |                    "open_issues_count":0,
           |                    "labels_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/labels{/name}",
           |                    "keys_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/keys{/key_id}",
           |                    "forks_count":0,
           |                    "private":false,
           |                    "html_url":"https://github.com/stream7/Google-Maps-for-Rails",
           |                    "open_issues":0,
           |                    "subscribers_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/subscribers",
           |                    "homepage":"https://rubygems.org/gems/gmaps4rails",
           |                    "compare_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/compare/{base}...{head}",
           |                    "trees_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/git/trees{/sha}",
           |                    "name":"Google-Maps-for-Rails",
           |                    "url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails",
           |                    "merges_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/merges",
           |                    "has_downloads":true,
           |                    "git_tags_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/git/tags{/sha}",
           |                    "comments_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/comments{/number}",
           |                    "svn_url":"https://github.com/stream7/Google-Maps-for-Rails",
           |                    "commits_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/commits{/sha}",
           |                    "created_at":"2012-12-18T12:13:30Z",
           |                    "statuses_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/statuses/{sha}",
           |                    "owner":{
           |                        "followers_url":"https://api.github.com/users/stream7/followers",
           |                        "gravatar_id":"ad7ef5c54efa59f36d4a7a1c2d95d269",
           |                        "id":301259,
           |                        "subscriptions_url":"https://api.github.com/users/stream7/subscriptions",
           |                        "received_events_url":"https://api.github.com/users/stream7/received_events",
           |                        "following_url":"https://api.github.com/users/stream7/following",
           |                        "url":"https://api.github.com/users/stream7",
           |                        "starred_url":"https://api.github.com/users/stream7/starred{/owner}{/repo}",
           |                        "avatar_url":"https://secure.gravatar.com/avatar/ad7ef5c54efa59f36d4a7a1c2d95d269?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
           |                        "login":"stream7",
           |                        "events_url":"https://api.github.com/users/stream7/events{/privacy}",
           |                        "organizations_url":"https://api.github.com/users/stream7/orgs",
           |                        "gists_url":"https://api.github.com/users/stream7/gists{/gist_id}",
           |                        "repos_url":"https://api.github.com/users/stream7/repos",
           |                        "type":"User"
           |                    },
           |                    "size":136,
           |                    "full_name":"stream7/Google-Maps-for-Rails",
           |                    "has_wiki":true,
           |                    "ssh_url":"git@github.com:stream7/Google-Maps-for-Rails.git",
           |                    "git_refs_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/git/refs{/sha}",
           |                    "hooks_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/hooks",
           |                    "events_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/events",
           |                    "description":"Enables easy display of items (taken from a Rails 3 model) with Google Map, OpenLayers, Bing or Mapquest. Geocoding + Directions included. Provides much options: markers customization, infowindows, auto-adjusted zoom, polylines, polygons, circles etc... See wiki for full description and examples.",
           |                    "pushed_at":"2012-12-18T12:35:10Z",
           |                    "stargazers_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/stargazers",
           |                    "forks_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/forks",
           |                    "has_issues":false,
           |                    "languages_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/languages",
           |                    "watchers":0,
           |                    "pulls_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/pulls{/number}",
           |                    "blobs_url":"https://api.github.com/repos/stream7/Google-Maps-for-Rails/git/blobs{/sha}"
           |                },
           |                "label":"stream7:master",
           |                "sha":"2d3f7dec61b7e1173d9b5b45defa8461ee79307d",
           |                "ref":"master"
           |            },
           |            "title":"Add support for AMD/requirejs",
           |            "comments":0,
           |            "commits":1,
           |            "state":"closed",
           |            "merged_by":{
           |                "followers_url":"https://api.github.com/users/apneadiving/followers",
           |                "gravatar_id":"808bec1c640143bd7091888d9edfb2f2",
           |                "id":247583,
           |                "subscriptions_url":"https://api.github.com/users/apneadiving/subscriptions",
           |                "received_events_url":"https://api.github.com/users/apneadiving/received_events",
           |                "following_url":"https://api.github.com/users/apneadiving/following",
           |                "url":"https://api.github.com/users/apneadiving",
           |                "starred_url":"https://api.github.com/users/apneadiving/starred{/owner}{/repo}",
           |                "avatar_url":"https://secure.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
           |                "login":"apneadiving",
           |                "events_url":"https://api.github.com/users/apneadiving/events{/privacy}",
           |                "organizations_url":"https://api.github.com/users/apneadiving/orgs",
           |                "gists_url":"https://api.github.com/users/apneadiving/gists{/gist_id}",
           |                "repos_url":"https://api.github.com/users/apneadiving/repos",
           |                "type":"User"
           |            },
           |            "issue_url":"https://github.com/apneadiving/Google-Maps-for-Rails/issues/303",
           |            "mergeable_state":"unknown"
           |        },
           |        "number":303
           |    },
           |    "actor":"apneadiving",
           |    "url":"https://github.com/apneadiving/Google-Maps-for-Rails/pull/303",
           |    "created_at":"2013-01-01T10:25:03-08:00",
           |    "repository":{
           |        "language":"JavaScript",
           |        "description":"Enables easy display of items (taken from a Rails 3 model) with Google Map, OpenLayers, Bing or Mapquest. Geocoding + Directions included. Provides much options: markers customization, infowindows, auto-adjusted zoom, polylines, polygons, circles etc... See wiki for full description and examples.",
           |        "owner":"apneadiving",
           |        "watchers":1095,
           |        "has_wiki":true,
           |        "url":"https://github.com/apneadiving/Google-Maps-for-Rails",
           |        "stargazers":1095,
           |        "open_issues":31,
           |        "fork":false,
           |        "size":232,
           |        "pushed_at":"2013-01-01T10:25:04-08:00",
           |        "name":"Google-Maps-for-Rails",
           |        "forks":163,
           |        "created_at":"2011-02-14T17:05:14-08:00",
           |        "id":1367656,
           |        "homepage":"https://rubygems.org/gems/gmaps4rails",
           |        "private":false,
           |        "has_issues":true,
           |        "has_downloads":true
           |    },
           |    "public":true,
           |    "type":"PullRequestEvent"
           |
           |}
         """.stripMargin)

      gh2013.parser(PullRequestEventParser)(json) shouldBe 'defined
   }
}
